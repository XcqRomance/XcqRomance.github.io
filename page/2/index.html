<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Romance的修行之路">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Romance的修行之路">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Romance的修行之路">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Romance的修行之路</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Romance的修行之路</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">分享自己学习的点滴，和大家一起学习成长</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/26/2016-12-26/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/26/2016-12-26/" itemprop="url">Swift构建通用版本Framework以及Framework的使用及其注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-26T18:49:41+08:00">
                2016-12-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前段时间公司app中有个BookRoom模块，也就是绘本阅读的模块需要重新做，并且封装成framework的形式进行（fcs项目已经很大，很冗余，每次Xcode编译项目都需要大量的时间，至少有5分钟），所以使用swift构建的framework遇到的问题坑我基本上都遇到过。于是想把整个过程记录下来，肯定有人和我一样遇到类似的问题，以便下次遇到可以快速解决；</p>
<h1 id="新建Framework项目"><a href="#新建Framework项目" class="headerlink" title="新建Framework项目"></a>新建Framework项目</h1><ol>
<li><p>新建项目选择Cocoa Touch Framework项目，取名为BookRoomKit，选择Swift语言<br><img src="http://upload-images.jianshu.io/upload_images/1603505-e00709b029a7aec2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="新建framework"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-2cde9f5a96997b8f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="bookroomkit"></p>
</li>
<li><p>然后新建一个BookRoomManager单例类用来传值设置，并且需要申明为public，这样我们才能够在其他项目上使用我们提供的framwork的代码；</p>
</li>
<li><p>编译framework；我这里以<strong>真机发布版本framework</strong>的为例。<br>首先使用Product-&gt;Scheme-&gt;Edit Scheme 打开如下界面，设置为Release环境，<br><img src="http://upload-images.jianshu.io/upload_images/1603505-70d4fcfb9476cee1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="设置编译环境为release"><br>然后按照下图选择，第1步代表真机运行，第2步运行，第3步代表编译成功的BookRoomKit.framework；<br><img src="http://upload-images.jianshu.io/upload_images/1603505-a854bd7613079151.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="编译framework"><br>选中BookRoomKit.framework，右击Show inFinder，会显示编译好的framework在finder中的位置，如下图：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-e60a672397353687.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="show in finder"></p>
</li>
<li><p>接下来我们新建一个壳工程，也就是测试工程，用来使用BookRoomKit.framework；并且命名为BookRoomDemo，如下图：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-1adc3207436250ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="BookRoomDemo App"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-851ae6c7e6b0c478.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="BookRoomDemo"><br>将BookRoomKit.framework拖入项目中，勾选下面三项，然后点击Finish<br><img src="http://upload-images.jianshu.io/upload_images/1603505-f1576bd482518455.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="勾选的三项"><br>编写代码前，记得将壳工程切换为release环境，然后真机运行，因为编译的framework必须与壳工程运行的环境一致才能够运行成功。<br><img src="http://upload-images.jianshu.io/upload_images/1603505-2950532664ca15dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="编写测试代码"><br><strong>运行之后你会发现，程序运行不起来，奔溃的错误信息是：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dyld: Library not loaded: @rpath/BookRoomKit.framework/BookRoomKit</span><br><span class="line">  Referenced from: /var/containers/Bundle/Application/C3208286-60C0-456D-B512-C26FB1E6A254/BookRoomDemo.app/BookRoomDemo</span><br><span class="line">  Reason: image not found</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-d0ccea26db53f000.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="奔溃信息日志"><br>这里就涉及一个问题，那就是我之前的一步操作是直接从Finder中将framework拖拽进壳工程项目的，这样操作默认会将framework放置在Linked Frameworks and Libraries下面，如下图；<br><img src="http://upload-images.jianshu.io/upload_images/1603505-c1609f72f53c413c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><strong>第一：Embedded Binaries和Linked Frameworks and Libraries是有区别，具体区别看这篇文章<a href="http://stackoverflow.com/questions/32375687/what-is-the-difference-between-embedded-binaries-and-linked-frameworks" target="_blank" rel="noopener">What is the difference between Embedded Binaries and Linked Frameworks</a>；第三：从ios8开始，苹果官方支持我们构建的dynamic framework，我们构建的BookRoomKit.framework就是dynamic frameworks，这种类型的framework它需要签名code-signed以及嵌入到我们的app，否则我们真机运行时就会奔溃<a href="http://stackoverflow.com/questions/29965032/embedded-binaries-with-ios-framework" target="_blank" rel="noopener">Embedded Binaries with iOS Framework</a></strong>，还有一个问题就是，我们构建的BooRoomKit.framework往往需要使用第三方的网络请求框架，JSON解析框架等等，这些都因为代码签名的问题都得在壳工程中添加<br>说了这么多，<strong>解决方案就是：选中Linked Frameworks and Libraries下面的BookRoomKit.framework点击删除，然后将左侧导航栏的framewotk拖拽到Embedded Binaries下面，这时Linked Frameworks and Libraries默认也会有</strong>，如下图：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-c8f8ef1373eacd9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="正确的方法"><br>再次运行，你会发现运行成功，而且打印了<code>hello bookroom</code><br><img src="http://upload-images.jianshu.io/upload_images/1603505-f901a4d5a6cbfa21.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="hello bookroom"></p>
<h1 id="Framework合并"><a href="#Framework合并" class="headerlink" title="Framework合并"></a>Framework合并</h1><ol>
<li>使用<code>lipo -info</code>查看framework支持的cpu架构，分别对应真机版本和模拟器版本的framework信息<br><img src="http://upload-images.jianshu.io/upload_images/1603505-f81ca6d6978badd3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="lipo -info"></li>
<li>使用<code>lipo -create</code>指令将模拟器和真机的framework合并成通用版本<br><img src="http://upload-images.jianshu.io/upload_images/1603505-6ffe762e24acf985.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="真机与模拟器的framework"><br>具体操作如下：<strong>首先</strong>，切换到/BookRoomKit/Build/Products；<strong>然后执行</strong><code>lipo -create -output [name] [path1] [path2]</code>这条命令；执行完成后在Products目录下生成一个BookRoomKit文件。<br><img src="http://upload-images.jianshu.io/upload_images/1603505-d268d5982c5d154f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="lipo -create1"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-0aea5ef61b9d348e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="lipo -create2"><br><strong>然后将</strong>上图红圈的文件复制到Release-iphoneos中去覆盖原来的版本，<strong>最后将</strong>Release-iphonesimulator中的框架文件里的/Modules/BookRoomKit.swiftmodule里的文件复制到Release-iphoneos对应的文件夹下。这样我们就得到了一个通用的的框架。<br><img src="http://upload-images.jianshu.io/upload_images/1603505-85efb12dff6b6dd3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="通用的framework"><br>最后用这个framework替换掉测试工程的framewotk就可以在真机和模拟器运行了</li>
</ol>
<h1 id="测试framework专用"><a href="#测试framework专用" class="headerlink" title="测试framework专用"></a>测试framework专用</h1><p>为了便于测试工程使用framework，我这里教大家把两个项目放到一个Xcode里面打开，也不用Xcode打开两个项目，这样便于测试使用，也不用来回在framework工程和壳工程之间切换。<strong>操作如下：</strong>关闭BookRoomKit项目，打开BookRoomDemo项目，将之前的操作取消回退，删除集成进来的Book Room.framework。然后将BookRoomKit.xcodeproj拖拽进BookRoomDemo项目中，编译BookRoomKit，如下图：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-532306570e8ea860.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="使用一个项目打开"><br>然后将编译好的framework拖拽进BookRoomDemo中的Embedded Binaries，如下图<br><img src="http://upload-images.jianshu.io/upload_images/1603505-23c2f48c55e34383.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3F6F9E91-A8CB-4ACE-B0B4-D21ABD9C5BA8.png"><br>通过上面的操作你就可以方便的测试framework编写的代码，不用每次都编译构建framework，当你运行BookRoomDemo的时候你就能够使用framework暴露出来的方法调用。</p>
<h1 id="Framework中使用image，xib，storyboard，font等资源文件"><a href="#Framework中使用image，xib，storyboard，font等资源文件" class="headerlink" title="Framework中使用image，xib，storyboard，font等资源文件"></a>Framework中使用image，xib，storyboard，font等资源文件</h1><ol>
<li><strong>image, xib,storyboard都是需要传递相应的bundle。</strong>而我看到网上一些旧的教程都很繁琐，还要建立什么resources.bundle之类的。经过我的实践，我这种方法更为简单。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let bundle = Bundle(identifier: &quot;xcqromance.BookRoomKit&quot;) // framework的bundle ID</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>storyboard的加载，xib类似<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let sb = UIStoryboard(name: &quot;BookHome&quot;, bundle: bundle)</span><br><span class="line">let vc = sb.instantiateViewController(withIdentifier: &quot;BookViewController&quot;) as! BookViewController</span><br><span class="line">viewController.navigationController?.pushViewController(vc, animated: true)</span><br></pre></td></tr></table></figure></p>
<p>image的加载<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let image = UIImage(named: &quot;bookroom_down_bg_blue&quot;, in: bundle, compatibleWith: nil)</span><br><span class="line">let imageView = UIImageView(image: image)</span><br></pre></td></tr></table></figure></p>
<ol>
<li>font的加载则是比较麻烦，得先注册，才能使用！所以我写了个OC的NSObject分类</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">+ (UIFont *) loadMyCustomFont:(NSString *)name size: (CGFloat)size type: (NSString *)type &#123;</span><br><span class="line">  NSString *fontPath = [[NSBundle bundleWithIdentifier:@&quot;xcqromance.BookRoomKit&quot;] pathForResource:name ofType:type];</span><br><span class="line">  NSData *inData = [NSData dataWithContentsOfFile:fontPath];</span><br><span class="line">  CFErrorRef error;</span><br><span class="line">  CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)inData);</span><br><span class="line">  CGFontRef font = CGFontCreateWithDataProvider(provider);</span><br><span class="line">  if (! CTFontManagerRegisterGraphicsFont(font, &amp;error)) &#123;</span><br><span class="line">    CFStringRef errorDescription = CFErrorCopyDescription(error);</span><br><span class="line">    NSLog(@&quot;Failed to load font: %@,%@&quot;, errorDescription,name);</span><br><span class="line">    CFRelease(errorDescription);</span><br><span class="line">  &#125;</span><br><span class="line">  CFRelease(font);</span><br><span class="line">  CFRelease(provider);</span><br><span class="line">  NSString *fontName = (__bridge NSString *)CGFontCopyPostScriptName(font);</span><br><span class="line">  UIFont* uifont = [UIFont fontWithName:fontName size:size];</span><br><span class="line">  return uifont;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在单例模初始化的时候进行注册。使用这个字体的方法和平时的一样，将fontName传递下就可以了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let label = UILabel()</span><br><span class="line">label.text = &quot;hello word&quot;</span><br><span class="line">label.sizeToFit()</span><br><span class="line">label.center = view.center</span><br><span class="line">label.font = UIFont(name: &quot;Kreon-Bold&quot;, size: 17)</span><br></pre></td></tr></table></figure>
<p>Github上面下载<a href="https://github.com/XcqRomance/SwiftFrameworkDemo" target="_blank" rel="noopener">BookRoomDemo</a></p>
<p>———————2017.04.10更新———————<br>每次使用终端<code>lipo -create</code>创建通用版本很繁琐、低效，于是想到了将这个过程脚本化；</p>
<h1 id="使用脚本一键构建通用版本的framework-真机、模拟器通吃的版本"><a href="#使用脚本一键构建通用版本的framework-真机、模拟器通吃的版本" class="headerlink" title="使用脚本一键构建通用版本的framework(真机、模拟器通吃的版本)"></a>使用脚本一键构建通用版本的framework(真机、模拟器通吃的版本)</h1><p>步骤如下：</p>
<ol>
<li><strong><code>build active architecture only</code></strong>设置为No<br><img src="http://upload-images.jianshu.io/upload_images/1603505-bd2bbc8a83285c4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="build active architecture only -&gt; No"></li>
<li>新建一个target，用来构建通用版本framework<br><img src="http://upload-images.jianshu.io/upload_images/1603505-58aa9d9e42e7c913.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="new target"><br>选择Cross-platform-&gt;other-&gt;Aggregate-&gt;Next<br><img src="http://upload-images.jianshu.io/upload_images/1603505-11118bca4cc6a42a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Aggregate"><br>命名为univeralBuilder，新建一个New Run Script Phase<br><img src="http://upload-images.jianshu.io/upload_images/1603505-6652b290dbd5ec79.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="D124D6A4-B28B-4632-95F2-568278624B06.png"><br>在shell里面添加以下内容，注意将第九行的FRAMEWORK_NAME改为自己framework的名字。 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># Merge Script</span><br><span class="line"></span><br><span class="line"># 1</span><br><span class="line"># Set bash script to exit immediately if any commands fail.</span><br><span class="line">set -e</span><br><span class="line"></span><br><span class="line"># 2</span><br><span class="line"># Setup some constants for use later on.</span><br><span class="line">FRAMEWORK_NAME=&quot;Your framework name&quot; </span><br><span class="line"></span><br><span class="line"># 3</span><br><span class="line"># If remnants from a previous build exist, delete them.</span><br><span class="line">if [ -d &quot;$&#123;SRCROOT&#125;/build&quot; ]; then</span><br><span class="line">rm -rf &quot;$&#123;SRCROOT&#125;/build&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 4</span><br><span class="line"># Build the framework for device and for simulator (using</span><br><span class="line"># all needed architectures).</span><br><span class="line">xcodebuild -target &quot;$&#123;FRAMEWORK_NAME&#125;&quot; -configuration Release -arch arm64 -arch armv7 -arch armv7s only_active_arch=no defines_module=yes -sdk &quot;iphoneos&quot;</span><br><span class="line">xcodebuild -target &quot;$&#123;FRAMEWORK_NAME&#125;&quot; -configuration Release -arch x86_64 -arch i386 only_active_arch=no defines_module=yes -sdk &quot;iphonesimulator&quot;</span><br><span class="line"></span><br><span class="line"># 5</span><br><span class="line"># Remove .framework file if exists on Desktop from previous run.</span><br><span class="line">if [ -d &quot;$&#123;HOME&#125;/Desktop/$&#123;FRAMEWORK_NAME&#125;.framework&quot; ]; then</span><br><span class="line">rm -rf &quot;$&#123;HOME&#125;/Desktop/$&#123;FRAMEWORK_NAME&#125;.framework&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 6</span><br><span class="line"># Copy the device version of framework to Desktop.</span><br><span class="line">cp -r &quot;$&#123;SRCROOT&#125;/build/Release-iphoneos/$&#123;FRAMEWORK_NAME&#125;.framework&quot; &quot;$&#123;HOME&#125;/Desktop/$&#123;FRAMEWORK_NAME&#125;.framework&quot;</span><br><span class="line"></span><br><span class="line"># 7</span><br><span class="line"># Replace the framework executable within the framework with</span><br><span class="line"># a new version created by merging the device and simulator</span><br><span class="line"># frameworks&apos; executables with lipo.</span><br><span class="line">lipo -create -output &quot;$&#123;HOME&#125;/Desktop/$&#123;FRAMEWORK_NAME&#125;.framework/$&#123;FRAMEWORK_NAME&#125;&quot; &quot;$&#123;SRCROOT&#125;/build/Release-iphoneos/$&#123;FRAMEWORK_NAME&#125;.framework/$&#123;FRAMEWORK_NAME&#125;&quot; &quot;$&#123;SRCROOT&#125;/build/Release-iphonesimulator/$&#123;FRAMEWORK_NAME&#125;.framework/$&#123;FRAMEWORK_NAME&#125;&quot;</span><br><span class="line"></span><br><span class="line"># 8</span><br><span class="line"># Copy the Swift module mappings for the simulator into the</span><br><span class="line"># framework.  The device mappings already exist from step 6.</span><br><span class="line">cp -r &quot;$&#123;SRCROOT&#125;/build/Release-iphonesimulator/$&#123;FRAMEWORK_NAME&#125;.framework/Modules/$&#123;FRAMEWORK_NAME&#125;.swiftmodule/&quot; &quot;$&#123;HOME&#125;/Desktop/$&#123;FRAMEWORK_NAME&#125;.framework/Modules/$&#123;FRAMEWORK_NAME&#125;.swiftmodule&quot;</span><br><span class="line"></span><br><span class="line"># 9</span><br><span class="line"># Delete the most recent build.</span><br><span class="line">if [ -d &quot;$&#123;SRCROOT&#125;/build&quot; ]; then</span><br><span class="line">rm -rf &quot;$&#123;SRCROOT&#125;/build&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>3.最后一步：选择Aggregate target和Simulator然后build，你会看到桌面由构建好通用版本的framework。<br>参考资料：<a href="http://arsenkin.com/ios-universal-framework.html" target="_blank" rel="noopener">http://arsenkin.com/ios-universal-framework.html</a></p>
<p>2017.11.07添加</p>
<h1 id="Framework依赖第三方库"><a href="#Framework依赖第三方库" class="headerlink" title="Framework依赖第三方库"></a>Framework依赖第三方库</h1><p>有人在下面提问，如果我新建的framework还依赖第三方库怎么解决？而这也是一个很正常的需求。比如我的BookRoomKit.framework有一个绘本zip包解压的功能，此时我有两种解决方案，第一将ZipArchive的代码拖入到我的framework中，还有一种是ZipArchive.framework引入到我的framework中。明显我们会选择第二种方式，一旦有更新直接替换新的的framework就行。而第二种方式又有两种方法引入：第一：在壳工程中使用pods、carhtage第三方库管理工具来添加；第二：直接将依赖的framework拖入壳工程。其实这两种方式的本质都是一样的，都有一个很关键的点就是<strong>Framework 的Build Settings中设置好依赖的第三方库的Framework Search Paths，同时在Build Phases的Link Binary With Binaries添加依赖的第三方库</strong>，下面我就以第二种方法直接将依赖的第三方库拖入壳工程进行配置为例。</p>
<ol>
<li>将下载好的<code>ZipArchive.framework</code>拖入壳工程，记得勾选<code>Copy items if needed</code>,此时你在壳工程就已经能够使用这个库了，这是因为你拖入第三库ZipArchive时Xcode已经给你配置好<code>Framework Search Paths</code>，你可以在壳工程的builds settings搜索到。如下图：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-e80b15518798e508.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>但是你此时在壳工程中使用<code>ZipArchive.framework</code>，运行起来是会crash的，奔溃信息和前文一张名为<code>奔溃信息日志</code>的图片是一样的，<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dyld: Library not loaded: @rpath/ZipArchive.framework/ZipArchive</span><br><span class="line">  Referenced from: /var/containers/Bundle/Application/74F5D1D3-D6B5-4C68-9629-9CAF6C16F133/BookRoomDemo.app/BookRoomDemo</span><br><span class="line">  Reason: image not found</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>所以解决方案也就是一样的，在EmbeddedBinaies中添加<code>ZipArchive.framework</code>。</p>
<ol>
<li><strong>设置BookRoomKit.xcodeproj的framework Search Paths</strong><br>路径务必填写正确，我写的相对路径：<code>$(PROJECT_DIR)/../BookRoomDemo/BookRoomDemo</code><br><img src="http://upload-images.jianshu.io/upload_images/1603505-7a399fdbccc9ecf4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><strong>BookRoomKit.xcodeproj的Link Binary With Binaries添加<code>ZipArchive.framework</code></strong>，选在Add Other，添加进来即可。<br>接下来你就可以在BookroomKit使用ZipArchive了，具体代码你可以在<a href="https://github.com/XcqRomance/SwiftFrameworkDemo" target="_blank" rel="noopener">BookRoomDemo</a>下载。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/17/2016-12-17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/17/2016-12-17/" itemprop="url">我的2016年个人总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-17T00:51:57+08:00">
                2016-12-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转眼2016还剩不到半个月的时间，想着年初简书第一篇文章写的2016年计划以及立下的目标，现在看了看，真是差了老远！为了生活的苟且，斗志也被生活慢慢消磨！甚至把时间消耗在每天无所事事的刷刷朋友圈以及微博的八卦上面（我粗略统计了下自己花费在这上面的时间每天至少两个小时）。安逸的生活过惯了！真的就没有当初斗志和激情，对编程也没有了之前的热爱！<strong>于此同时，我也有些迷茫，我一直在思考我的一生该怎么度过？我这么努力工作的的意义是什么！我也一直希望我成功的速度，比父母老去的要快。外面的世界很精彩，我一直想去体验！外面的美食很好吃，我想去尝尝，以及父母家人还没有来得及尽孝报恩！我终将一直在寻求答案的路途中。</strong></p>
<p>在此记录自己2016一年中对工作、生活以及家人的所思所想，见证自己的成长，体验到的人生的酸甜苦辣，以此共勉：</p>
<h2 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h2><p>作为一个程序员，工作就是整天对着电脑敲敲代码，朝十晚六（不过这一般都很难做到），一般是更晚，项目紧的时候周末加加班是在正常不过的了。平时开开会讨论讨论技术，对对进度，工作闲余和同事们聊聊热点新闻、八卦！晚上回家，玩玩游戏，看看视频！写写文章。这就是程序员的一天生活！<br>我五月底从上家公司辞职，进入了现在的公司。其实那时我挺舍不得的，熟悉的工作环境，熟悉的同事朋友，更重要的是离住的地方近，自己骑自行车10多分钟就到；有的人还经常联系，有的人就随着时间慢慢联系就少了。但是人往高处走，在一个公司呆久了，就不得不考虑自己的发展及未来，以及当时的互联网形势不容乐观。过完年回来我就知道我该走了，毕竟知道自己继续在这呆着已经没有什么发展了也没有学习以及提升的空间了！一旦自己有了清晰的定位之后，我就立马着手简历，应聘职位，不到一周我就拿到面试三家公司，其中两家给了offer！并且选择了我熟悉的，更认可教育公司也就是现在的工作的公司，而非当时火的不行的直播互联网公司！我知道，这就像15年的o2o一样，到年底洗牌的时候一大批做直播肯定会死！现在回头看，确实是明智的选择。<br><strong>进入新的公司，新的环境，一切都很好！我也很快的融入了新的集体，队伍也越来越庞大，做的产品也跟着计划在部署。我需要做的，能够做的是，高效高质的完成自己的工作，不拖团队的后腿，跟着团队走！尽管工作日晚上都得加会班，但是疲惫的心中确实会有一种喜悦感，成就感，自己努力、整个团队努力完成的项目逐渐得到用户的使用和认可。</strong><br>公司的福利和氛围还是非常好的，加班的水果，零食每天都有，零食有大家都爱吃的卫龙牌辣条，鸡翅，鸡爪等等；好多人来了不久，就发现比自己刚公司时胖了好多。公司加班晚餐也很丰盛，几乎一周一次的那个板面是我们很多人所喜爱的，感觉比外面餐馆的还正宗。我们男同胞们在晚餐前后还会来几局桌上足球，这也是一天繁重的工作中唯一的放松休闲的方式。公司9月份还组织了一次丰宁坝上草原的团建活动，看到他们发的图片就知道玩的很嗨。我其实很想去的，当初投票去哪里玩的时候，我就极力推荐去草原，可当时我奶奶突然病重，我就请假回家看奶奶了。</p>
<p>下面是在公司随机拍摄的点滴：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-ba34f08f212025d2.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="超好玩的桌上足球" title="超好玩的桌上足球"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-f305325b125c1e2e.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="干净整洁的办公区域" title="干净整洁的办公区域"> </p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-f44fcd06ab7f26fa.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="美味的晚餐，也是大家最爱吃的牛肉板面" title="美味的晚餐，也是大家最爱吃的牛肉板面"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-b21688331a87b1db.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="我没去成的丰宁坝上草原大合影" title="我没去成的丰宁坝上草原大合影"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-d2113e983226fb12.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="一群充满朝气的年轻团队" title="一群充满朝气的年轻团队"></p>
<h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><p>网上常有人带讽刺意味的说程序员：人傻，钱多，死的早！但我很不喜欢这样的标签，每个人都有自己的活法，既然选择了这条道，那就冒着头皮也得走下去。不可否认，今年关于程序员猝死的消息还不少，而原因无非就是高强度的工作，连续的加班。可能我也还没真正体验过那种提倡加班文化的公司，如BAT这些互联网大佬公司，所以不知道这究竟是怎样一个强度，当然我也一直想去体验一番。但我在这想说的是：怪自己罗！自己的生命都不珍惜，那能怨谁。身体是革命的本钱！如果公司强制加班，而你有感觉自己扛不住，那可以辞职啊！据说年初才被挖进滴滴的YYKit的作者前段时间从滴滴辞职，原因就是加班。<br><strong>每个人都有自己选择的权利！而我的选择就是工作时候好好工作，周末时间好好生活，好好放松，好好锻炼身体。</strong>我大学四年就有坚持跑步的习惯，晚上有时间就会去操场跑几圈；空闲时间还经常会去打篮球(尽管技术可能不怎样，但开心就好，也经常和几个哥们去球场一起打分组)。和几个哥们来北京工作后，我也坚持跑步（经常从林萃桥地铁站沿着奥林匹克公园那条路跑回家）大汗淋漓一场！那时周末也经常一起约起打篮球、爬爬北京周边的山！后来，北京周边的山都爬过了，也就很少去了。还有就是当初一起来北京的朋友好多因各种原因都回广州、深圳发展了！所以周末能约的人就少了！于是我就自己办了张健身卡，跑跑步，游游泳，练练器械，练练肌肉！还买了辆自行车，加入了骑遍天下骑行俱乐部，认识了很多朋友，俱乐部经常组织骑行活动！也经常跟着俱乐部骑行，去了草原天路，野三坡！还和一个哥们骑行去了天津，那时正好节假日，我的车中途又爆胎，耽误了点时间，不然也不至于晚上才到那里！由于没有提前预定房间，那时真的房间爆满，出来游的人真多，没有多余的房间，我们当时骑遍了天津的酒店都没有房间了，那时感到真的很绝望，晚上又累又饿！最后在一家大众浴池的大堂入宿了一晚，那条件实在是差，因为很多人也没找到房间，都住找到来了，所以什么人都有，看视频放外音的，睡觉打呼的，后半夜还有两人因为床铺打架的，我实在受不了，一整晚都没睡好，第二天骑到香河时实在是不骑不动了！只好叫了辆面的，送到了东五环！到达已到晚上，手机也没电了，没有导航；幸亏帝都好心人多，借用了下手机导航了下，以及向一位大爷问了路，最好才回到家！<strong>通过这事我都长了个心眼，外出远行去一些热门景点节假日期间必须得事先预定房间，否则就只能露宿街头，还有就是手机出门前充满电，以及带一块备用移动电源。</strong>有时工作烦躁时我还会下班回家去刷长安街，从五棵松到国贸，再原路返回每次骑行经过天安门的感觉都不一样！一场大汗淋漓之后，心中顿时轻松许多！我还骑行上下班过一段时间，从西四环到东北三环20来公里一个多小时，可惜前段时间我的爱车在公司楼下被偷了，所以只暂时只能乖乖坐地铁上下班了，明年开春准备买一辆公路自行车！</p>
<p>下面是我骑行的拍的一些照片：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-ed43b261454b66d3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="草原天路的第一个坡，大家都是推上来的" title="草原天路的第一个坡，大家都是推上来的"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-279ec302849b08b6.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="最美的路牌" title="最美的路牌"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-c50c443ab9ddaa74.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="一望无际的草原和大风轮" title="一望无际的草原和大风轮"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-43efa870e385977b.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="美味的烤全羊" title="美味的烤全羊"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-6935828031d897b2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="和我一起天津骑行的哥们" title="和我一起天津骑行的哥们"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-7dd882c194b2315a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="这是骑行者最爱的一个pose" title="这是骑行者最爱的一个pose"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-a35d484bffe87897.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="百里峡大合照" title="百里峡大合照"></p>
<h2 id="家人"><a href="#家人" class="headerlink" title="家人"></a>家人</h2><p>一个人来北京打拼，远离父母，一年也就回家两三次，最大的愿望是家人身体健康，远离疾病！但是发生的两件事让我很艰难，痛苦！一是上半年父亲汽车追尾，面包车报废，庆幸的是父亲并没什么大碍，另一件是奶奶去世，则让我至今都没有缓过神来，我现在都有些不相信奶奶就这样去世了，就这样离我而去，甚至不时的在某个深夜从梦中惊醒时都会痛哭流泪。这一切都来得太突然，而我却是在电话里听到这个噩耗，我以为平时这么健朗的奶奶肯定没什么大毛病，我以为国庆我回家见奶奶还是会使那个过年我回北京工作时候在我耳边唠叨这唠叨那的那个奶奶。然而这一切将无法实现，<strong>我也没能见到奶奶最后一面！只听姐姐说，奶奶走前眼角流下了一滴泪！我不知道这一滴眼泪代表着什么。但我知道了，尽孝得趁早。知道了离家之后才知道恋家，也真的只有长大之后，自己开始计算生活的时候才知道，父母为了我付出了多少</strong>。<br>我从医生那里得知奶奶时因为蛛网膜下腔出血压迫脑部神经导致坏死而不能说话和病重，直至最后去世，从家里邻居得知奶奶出现状况那天早晨都还去了集市上卖点自己种的小菜，奶奶这一辈子都很勤俭节约，我从记事开始就是跟着奶奶过，父亲因为在家做养猪生意亏本8万多（那是在2000年左右，对于一个农村家庭来说，这可是一笔巨款）被迫南下打工，于是我就一直跟着奶奶，所以和奶奶的感情非常深刻，她经常和我讲她小时候是多么的艰苦，受当时重男轻女的观念的影响，她也没有读过书，也不认识字，我曾想教她学，但真的太费力了，于是也没有学会；还教育我不要浪费粮食（这也让我至今吃饭，碗里的米饭都基本不会剩余，吃多少，打多少的习惯），还说现在的社会怎么怎么好，要我珍惜现在的美好生活，做人也得行得正坐得端，她很喜欢看毛主席相关的电影，家中至今保留关于毛泽东DVD影片都快有上百部了，所以我也经常跟着奶奶一起看，但是她经常将一部电视剧看了一遍又一遍，有时回到家她还经常和我谈论这些剧情，我至今记得有一次回家我放学回家看她在看《毛岸英》，情节刚好是毛岸英牺牲了，她就在那感慨这么好的一个孩子怎么就没了，还和我说毛主席让他儿子上前线是多么多么伟大，叫我要像毛岸英学习。。。他最惋惜毛岸英，而我却一般会受不了她的唠叨直接走开，就去会玩自己的。现在回想起来这些是那么的熟悉，却又是那么的遥远；我以后回家再也无法听到奶奶在我耳边的唠叨。奶奶的去世我还知道了<strong>我们永远不知道下一刻会发生什么，我们也永远不知道明天和意外哪一个先来。我们唯一能做的，只是好好珍惜活着的每一分钟，善待与我们相遇的每一个人。</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-a63cdb7942ffb00d.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="做完第一次手术，我在赶回家的路上与她视频，还能听到她叫我乳名" title="做完第一次手术，我在赶回家的路上与她视频，还能听到她叫我乳名"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-874485fdb45dac21.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="我赶回去后，奶奶情况越来越不容乐观，每天从大脑里面抽出来的血水，也越来越浑浊" title="我赶回去后，奶奶情况越来越不容乐观，每天从大脑里面抽出来的血水，也越来越浑浊"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-2f0135b0bec259a3.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="在重症监护室的奶奶，每天只能规定的时间见半个小时" title="在重症监护室的奶奶，每天只能规定的时间见半个小时"></p>
<p>面对奶奶的疾病，我感到了无能为力！感觉到人类的渺小、生命的渺小！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/17/2016-10-17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/17/2016-10-17/" itemprop="url">iOS自动打包上传实践-企业账号APP上传到自己服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-17T15:57:46+08:00">
                2016-10-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>公司使用企业账号发布app到自己服务器，每天必须发布一个app包，几乎每天在打包上面就得至少半个钟头，而每天下午都得开会30分钟，于是就想充分利用这时间，在开会前在输入终端命令，执行脚本文件实现自动打包，并且上传到自己服务器。这样开完会就已经自动打包完成。早点下班回家！<br>本文是参考：<a href="http://liumh.com/2015/11/25/ios-auto-archive-ipa/" target="_blank" rel="noopener">iOS自动打包并发布脚本</a>的实践</p>
<h2 id="使用苹果自带的工具xcodebuild和xcrun打包签名"><a href="#使用苹果自带的工具xcodebuild和xcrun打包签名" class="headerlink" title="使用苹果自带的工具xcodebuild和xcrun打包签名"></a>使用苹果自带的工具xcodebuild和xcrun打包签名</h2><ol>
<li>打开Mac终端，输入命令 <code>man xcodebuild</code> ,<code>man xcrun</code>查看使用方法。<br><img src="http://upload-images.jianshu.io/upload_images/1603505-693662cb0d9b348c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="xcodebuild.png"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-8358f5bcb38c5585.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="xcrun.png"></li>
<li>在项目的根目录输入以下命令：<br><code>xcodebuild -workspace leapParent.xcworkspace -scheme leapParent-configuration Release</code>，我使用的是cocoapods管理的项目所以使用第一张图的第三种方式build，成功之后如下：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-12e7a1580fb0119e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="buildsuccess.png"><br>此时在./Build/Release-iphoneos文件夹下会有leapParent的文件。<br>紧接着输入：<code>xcrun -sdk iphoneos -v PackageApplication /Users/romance/Desktop/CQCoder/CloudClassroom_iOS/Build/Products/Release-iphoneos/leapParent.app -o ~/Desktop/leapParent.ipa</code>；其中<code>-o ~/Desktop/leapParent.ipa</code>:代表项目打包输出的路径，<br><code>/Users/romance/Desktop/CQCoder/CloudClassroom_iOS/Build/Products/Release-iphoneos/leapParent.app</code>这个是上一步骤xcodebuild成功之后.app的绝对路径</li>
<li>使用python脚本实现的自动打包（原理就是将2的内容用python写好，然后传入参数，执行脚本）<br>将<a href="https://github.com/carya/Util" target="_blank" rel="noopener">autobuild.py</a>，放入项目的根目录，然后执行<code>python ./autobuild.py -w leapParent.xcworkspace -s leapParent -o ~/Desktop/leapParent.ipa</code>命令，此时可能报错：<br><code>ImportError: No module named requests</code><br>此时输入以下命令就可以解决问题<code>sudo easy_install -U requests</code><br>其中autobuild.py有这几项需要配置下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CODE_SIGN_IDENTITY = &quot;iPhone Distribution: xxxxxxxx Co. Ltd (xxxxxxx9A)&quot;</span><br><span class="line">PROVISIONING_PROFILE = &quot;xxxxxxxxxx-xxxxx-xxxxx-xxxx-xxxxxxxxxxxx&quot;</span><br><span class="line">CONFIGURATION = &quot;Release&quot;</span><br><span class="line">SDK = &quot;iphoneos&quot;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>其中<code>CODE_SIGN_IDENTITY</code>获取方式：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-6b214bfd3b2c8cae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="CODE_SIGN_IDENTITY.png"><br><code>PROVISIONING_PROFILE</code>获取方式：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-a9be017126feef47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="provisionfile.png"></p>
<p>至此，就大功告成了！但还没做上传到自己服务器，但这个也容易叫后台人员添加一个接口，配置autobuild.py文件就可以了。</p>
<h2 id="添加app打包完成后自动上传到upyun服务器"><a href="#添加app打包完成后自动上传到upyun服务器" class="headerlink" title="添加app打包完成后自动上传到upyun服务器"></a>添加app打包完成后自动上传到upyun服务器</h2><p>这步骤相对简单，参考upyun的Python SDK官方文档将上传方法添加到脚本文件就可以了（温馨提示下：python文件不要用xcode打开编辑，使用sublime就行，因为tab键为4个空格，不符合python语法，执行脚本文件会出错）<br><img src="http://upload-images.jianshu.io/upload_images/1603505-ebac6b0c002f4cf6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="83208632-897C-4E2A-B635-2035E9F764D6.png"><br>我使用的是断点续传：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-42aaec01432394c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FFE4D847-2647-44FF-9624-3D9767848865.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/22/2016-09-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/22/2016-09-22/" itemprop="url">iOS的使用Swift，NSOperation实现的倒计时</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-22T19:52:34+08:00">
                2016-09-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前段时间，公司项目有个需求要求实现任务倒计时，头疼死我了，折腾了我老半天，先看最终的实现效果，如下图。当时的需求有两点要求：</p>
<ol>
<li>要求在当前任务关卡实现倒计时计算；</li>
<li>要求在弹出来的tips页面同时也进行倒计时。</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-12f3d182fe73a345.gif?imageMogr2/auto-orient/strip" alt="timeCountDown.gif"></p>
<p>一想到倒计时，我们可能想到的解决方案有三种；<strong><code>NStimer、GCD、NSOperation</code></strong></p>
<h2 id="NSTimer实现倒计时"><a href="#NSTimer实现倒计时" class="headerlink" title="NSTimer实现倒计时"></a>NSTimer实现倒计时</h2><p>NSTimer实现计时需要注意，他默认是在runloop中的<code>NSDefaultRunLoopMode</code>计时，在这个模式下面，有滑动事件，计时将失效，此时我们需要在将timer添加到runloop中的<code>NSRunLoopCommonModes</code>,这样就不会有任何影响<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> animationTimer = <span class="type">NSTimer</span>.scheduledTimerWithTimeInterval(<span class="number">10</span>, target: <span class="keyword">self</span>, selector: #selector(<span class="type">WeeklyMissionViewController</span>.runanimation), userInfo: <span class="literal">nil</span>, repeats: <span class="literal">true</span>)</span><br><span class="line"><span class="type">NSRunLoop</span>.mainRunLoop().addTimer(animationTimer!, forMode: <span class="type">NSRunLoopCommonModes</span>)</span><br><span class="line">animationTimer!.fire()</span><br></pre></td></tr></table></figure></p>
<h2 id="GCD实现倒计时"><a href="#GCD实现倒计时" class="headerlink" title="GCD实现倒计时"></a>GCD实现倒计时</h2><p>GCD实现计时需要注意的是<code>let _timer: dispatch_source_t</code>必须存储为全局变量<code>timer = _timer</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setGCDTimer</span><span class="params">(weeklyMission: MissionList, type: Int)</span></span> &#123;</span><br><span class="line">       <span class="comment">// 计算倒计时</span></span><br><span class="line">       <span class="keyword">let</span> nowDate =  <span class="type">NSDate</span>()</span><br><span class="line">       <span class="keyword">let</span> nowUnix = nowDate.timeIntervalSince1970</span><br><span class="line">       </span><br><span class="line">       <span class="keyword">let</span> <span class="built_in">count</span> = (weeklyMission.createdAt)! + <span class="number">24</span> * <span class="number">3600</span> - <span class="type">Int</span>(nowUnix)        </span><br><span class="line">       <span class="keyword">var</span> _timeout: <span class="type">Int</span> = <span class="built_in">count</span></span><br><span class="line">       <span class="keyword">let</span> _queue: dispatch_queue_t = dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)</span><br><span class="line">       <span class="keyword">let</span> _timer: dispatch_source_t = dispatch_source_create(<span class="type">DISPATCH_SOURCE_TYPE_TIMER</span>, <span class="number">0</span>, <span class="number">0</span>, _queue)</span><br><span class="line">       timer = _timer</span><br><span class="line">       <span class="comment">// 每秒执行</span></span><br><span class="line">       dispatch_source_set_timer(_timer, dispatch_walltime(<span class="literal">nil</span>, <span class="number">0</span>), <span class="number">1</span> * <span class="type">NSEC_PER_SEC</span>, <span class="number">0</span>)</span><br><span class="line">       </span><br><span class="line">       printLog(<span class="string">"----_timer-----"</span>)</span><br><span class="line">       dispatch_source_set_event_handler(_timer) &#123; () -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">           </span><br><span class="line">           <span class="keyword">if</span> _timeout &lt;= <span class="number">0</span> &#123;</span><br><span class="line">               <span class="comment">// 倒计时结束</span></span><br><span class="line">               dispatch_source_cancel(_timer)</span><br><span class="line">               dispatch_async(dispatch_get_main_queue(), &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] () -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">                   <span class="comment">// 如需更新UI 代码请写在这里</span></span><br><span class="line">                   &#125;)</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               </span><br><span class="line">               <span class="built_in">print</span>(<span class="string">"cell:<span class="subst">\(weeklyMission.mission)</span>---<span class="subst">\(_timeout)</span>"</span>)</span><br><span class="line">               _timeout -= <span class="number">1</span></span><br><span class="line">               <span class="keyword">let</span> hours = _timeout / <span class="number">3600</span></span><br><span class="line">               <span class="keyword">let</span> hoursSec = hours * <span class="number">3600</span></span><br><span class="line">               <span class="keyword">let</span> minutes = (_timeout - hoursSec) / <span class="number">60</span></span><br><span class="line">               <span class="keyword">let</span> seconds = _timeout - hoursSec - minutes * <span class="number">60</span></span><br><span class="line">               </span><br><span class="line">               dispatch_async(dispatch_get_main_queue(), &#123;  [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">                   <span class="keyword">let</span> timeText = <span class="string">"<span class="subst">\(String(format: "%.2d",hours)</span>):<span class="subst">\(String(format: "%.2d",minutes)</span>):<span class="subst">\(String(format: "%.2d",seconds)</span>)"</span></span><br><span class="line">                   <span class="comment">// 如需更新UI 代码请写在这里</span></span><br><span class="line">                   &#125;)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       dispatch_resume(_timer)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="NSOperation实现倒计时"><a href="#NSOperation实现倒计时" class="headerlink" title="NSOperation实现倒计时"></a>NSOperation实现倒计时</h2><p>以上两种实现的计时，有个很明显的缺点就是，不可控！他们二者开启一个计时器之后，没法方便的控制他停止，继续；但是NSOperation不同，他有cancel方法，我们可以拿到对应的operation，然后操作他，可控性好。<br>主要代码如下：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  TimeCountDownManager.swift</span></span><br><span class="line"><span class="comment">//  leapParent</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by romance on 16/9/19.</span></span><br><span class="line"><span class="comment">//  Copyright © 2016年 Firstleap. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 计时中回调</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">TimeCountingDownTaskBlock</span> = (timeInterval: <span class="type">NSTimeInterval</span>) -&gt; <span class="type">Void</span></span><br><span class="line"><span class="comment">// 计时结束后回调</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">TimeFinishedBlock</span> = (timeInterval: <span class="type">NSTimeInterval</span>) -&gt; <span class="type">Void</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> shareInstance = <span class="type">TimeCountDownManager</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeCountDownManager</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 单利</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">sharedInstance</span> : <span class="title">TimeCountDownManager</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shareInstance</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> pool: <span class="type">NSOperationQueue</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        pool = <span class="type">NSOperationQueue</span>()</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  开始倒计时，如果倒计时管理器里具有相同的key，则直接开始回调。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  @param Key         任务key，用于标示唯一性</span></span><br><span class="line"><span class="comment">     *  @param timeInterval 倒计时总时间，</span></span><br><span class="line"><span class="comment">     *  @param countingDown 倒计时时，会多次回调，提供当前秒数</span></span><br><span class="line"><span class="comment">     *  @param finished     倒计时结束时调用，提供当前秒数，值恒为 0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">scheduledCountDownWith</span><span class="params">(key: String, timeInteval: NSTimeInterval, countingDown:TimeCountingDownTaskBlock?,finished:TimeCountingDownTaskBlock?)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> task: <span class="type">TimeCountDownTask</span>?</span><br><span class="line">        <span class="keyword">if</span> coundownTaskExistWith(key, task: &amp;task) &#123;</span><br><span class="line">            task?.countingDownBlcok = countingDown</span><br><span class="line">            task?.finishedBlcok = finished</span><br><span class="line">            <span class="keyword">if</span> countingDown != <span class="literal">nil</span> &#123;</span><br><span class="line">                countingDown!(timeInterval: (task?.leftTimeInterval) ?? <span class="number">60</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            task = <span class="type">TimeCountDownTask</span>()</span><br><span class="line">            task?.leftTimeInterval = timeInteval</span><br><span class="line">            task?.countingDownBlcok = countingDown</span><br><span class="line">            task?.finishedBlcok = finished</span><br><span class="line">            task?.name = key</span><br><span class="line">            </span><br><span class="line">            pool.addOperation(task!)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  查询倒计时任务是否存在</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  @param akey 任务key</span></span><br><span class="line"><span class="comment">     *  @param task 任务</span></span><br><span class="line"><span class="comment">     *  @return YES - 存在， NO - 不存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">coundownTaskExistWith</span><span class="params">(key: String,<span class="keyword">inout</span> task: TimeCountDownTask? )</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> taskExits = <span class="literal">false</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="number">_</span>, obj)  <span class="keyword">in</span> pool.operations.<span class="built_in">enumerate</span>() &#123;</span><br><span class="line">            <span class="keyword">let</span> temptask = obj <span class="keyword">as</span>! <span class="type">TimeCountDownTask</span></span><br><span class="line">            <span class="keyword">if</span> temptask.name == key &#123;</span><br><span class="line">                task = temptask</span><br><span class="line">                taskExits = <span class="literal">true</span></span><br><span class="line"><span class="comment">//                print("coundownTaskExistWith#####\(temptask.leftTimeInterval)")</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> taskExits</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  取消所有倒计时任务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">cancelAllTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">        pool.cancelAllOperations()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  挂起所有倒计时任务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">suspendAllTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">        pool.suspended = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeCountDownTask</span>: <span class="title">NSOperation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> leftTimeInterval: <span class="type">NSTimeInterval</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> countingDownBlcok: <span class="type">TimeCountingDownTaskBlock</span>?</span><br><span class="line">    <span class="keyword">var</span> finishedBlcok: <span class="type">TimeFinishedBlock</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.cancelled &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="keyword">while</span> leftTimeInterval &gt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"leftTimeInterval----<span class="subst">\(leftTimeInterval)</span>"</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.cancelled &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            leftTimeInterval -= <span class="number">1</span></span><br><span class="line">            dispatch_async(dispatch_get_main_queue(), &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">self</span>.countingDownBlcok != <span class="literal">nil</span> &#123;</span><br><span class="line">                    <span class="keyword">self</span>.countingDownBlcok!(timeInterval: <span class="keyword">self</span>.leftTimeInterval)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="type">NSThread</span>.sleepForTimeInterval(<span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        dispatch_async(dispatch_get_main_queue()) &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.cancelled &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.finishedBlcok != <span class="literal">nil</span> &#123;</span><br><span class="line">                <span class="keyword">self</span>.finishedBlcok!(timeInterval: <span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>稍微解析下以上代码，<code>TimeCountDownManager</code>是定时器管理类，是个单利，可以管理app中所有需要倒计时的task，<code>TimeCountDownTask</code>是具体的用来处理倒计时的NSOperation子类，大家还可以在我的基础上进行完善，比如cancel具体taskIdentifier的task，suspended具体的task，等等！</p>
<p>整个demo代码的<a href="https://github.com/XcqRomance/TImeCountingDown" target="_blank" rel="noopener">GitHub地址</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/08/30/2016-08-30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/30/2016-08-30/" itemprop="url">swift实现的单词高亮</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-30T19:29:39+08:00">
                2016-08-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>公司做的一款教育App中，有个BookReading模块是孩子用来学习英语，里面又有一个子模块Listen用来播放句子，产品的需求是要求单词跟随着句子的播放而高亮，效果如下；<a href="https://github.com/XcqRomance/WordHilighted" target="_blank" rel="noopener">GitHubDemo地址下载</a>，这种需求之前没做过，网上搜索的也没有资料（有的也是歌词的高亮），所以花费了点时间，现在趁闲暇时间写了个小小的demo，和大家分享，整个代码写的比较基础，有相似需求的可以借鉴，不懂的地方欢迎相互交流<br><img src="http://upload-images.jianshu.io/upload_images/1603505-cfa068c2f0626971.gif?imageMogr2/auto-orient/strip" alt="wordHilightGif.gif"></p>
<h2 id="整体思路"><a href="#整体思路" class="headerlink" title="整体思路"></a>整体思路</h2><ol>
<li><p>分析服务器提供的json数据格式，demo中即为lrc.json，知道每个单词都有读的对应的开始时间<br><img src="http://upload-images.jianshu.io/upload_images/1603505-563f7f737a768c97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="lrcjson.png"><br>其中我定义了一个<code>var wordRanges = [NSRange]()</code>，用来存储每个单词的Range，用来匹配相应单词的高亮。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> textStr: <span class="type">NSString</span> = section!.text</span><br><span class="line">        <span class="keyword">self</span>.wordRanges.removeAll() <span class="comment">// 在下一次添加之前，得先删除之前的</span></span><br><span class="line">        <span class="keyword">weak</span> <span class="keyword">var</span> weakSelf = <span class="keyword">self</span></span><br><span class="line">        textStr.enumerateSubstringsInRange(<span class="type">NSMakeRange</span>(<span class="number">0</span>, textStr.length), options: .<span class="type">ByWords</span>) &#123; (substring, substringRange, enclosingRange, bb) <span class="keyword">in</span></span><br><span class="line">            weakSelf!.wordRanges.append(substringRange)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用CADisplayLink添加到mainRunloop中，来实现不停的重绘UI工作，相比于定时器精确度更高</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setupTimer</span><span class="params">()</span></span> &#123;</span><br><span class="line">        displayLink = <span class="type">CADisplayLink</span>(target: <span class="keyword">self</span>, selector: #selector(<span class="type">BookCollectionViewController</span>.displayWord))</span><br><span class="line">        displayLink?.addToRunLoop(<span class="type">NSRunLoop</span>.mainRunLoop(), forMode: <span class="type">NSDefaultRunLoopMode</span>) <span class="comment">// mode 为 NSRunLoopCommonModes</span></span><br><span class="line">        <span class="comment">// 调用的频率 默认为值1，代表60Hz，即每秒刷新60次，调用每秒 displayWord() 60次，这里设置为10，代表6Hz</span></span><br><span class="line">        displayLink?.frameInterval = <span class="number">10</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">displayWord</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> cell = <span class="keyword">self</span>.collectionView.visibleCells().first <span class="keyword">as</span>! <span class="type">BookCollectionViewCell</span></span><br><span class="line">        <span class="keyword">let</span> indexPath = collectionView.indexPathForCell(cell)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> page = model?.pages[(indexPath?.item)!] <span class="keyword">else</span> &#123;<span class="keyword">return</span>&#125;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> section = page.sections.first <span class="keyword">else</span> &#123;<span class="keyword">return</span>&#125;</span><br><span class="line">        <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">true</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> curTime = audioPlayer?.currentTime ?? <span class="number">0</span> <span class="comment">// 播放声音的的时间，ms</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">guard</span> (wordRanges.first != <span class="literal">nil</span>) <span class="keyword">else</span> &#123;<span class="keyword">break</span>&#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> word = section.words[i]</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> curRange = wordRanges[i]</span><br><span class="line">            <span class="keyword">if</span> <span class="type">Int</span>(curTime * <span class="number">1000</span>) &gt;=  <span class="type">Int</span>(word.cueStartMs) &#123; <span class="comment">// 拿当前播放的声音时间与json每个单词的开始读取时间相比，</span></span><br><span class="line">                attributeStr?.addAttributes([<span class="type">NSForegroundColorAttributeName</span>: <span class="type">UIColor</span>.whiteColor()], range: <span class="type">NSMakeRange</span>(<span class="number">0</span>, attributeStr!.length))</span><br><span class="line">                attributeStr?.addAttributes([<span class="type">NSForegroundColorAttributeName</span>: <span class="type">UIColor</span>.redColor()], range: curRange)</span><br><span class="line">                cell.content.attributedText = attributeStr</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> i &gt;= wordRanges.<span class="built_in">count</span> || i &gt;= section.words.<span class="built_in">count</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/21/2016-06-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/21/2016-06-21/" itemprop="url">《联盟》奇点系列读后感</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-21T22:32:30+08:00">
                2016-06-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>花了一个周末将《联盟》这本书籍读完了，记录一下自己的读后感！<br>在互联网的时代，终身雇佣制缺少灵活性，不再适应网络时代；于是出现了自由雇佣制年代，也就是我们正所经历的时代。在联盟这一新型的雇佣关系中，雇主与员工相互信任并且相互投资，一起打造双赢的工作模式</p>
<p>《联盟》作者是里德.霍夫曼全球最大职业社交网站LinkedIn的创始人之一和执行总裁，硅谷风险投资公司Greylock合伙人。</p>
<p>本书总共八章<br>一、互联网时代的的雇佣关系—通过简历联盟重建信任与忠诚<br>二、任期制—设计渐进性承诺<br>三、任期中的协调-协调员工与公司的目标与价值观<br>四、执行转变期计划<br>五、利用员工人脉获取情报—让世界为我所用<br>六、执行人脉情报计划<br>七、投资公司同事联络网—终身联盟的互惠关系<br>八、发挥同事联络网的功效</p>
<p>我总结本书大概下面几点内容</p>
<p>先解释几个关键词：</p>
<h2 id="任期制"><a href="#任期制" class="headerlink" title="任期制"></a>任期制</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-a2375a5c14259375.png" alt="任期制.png"></p>
<p><strong>联盟</strong>适用的对象是处于<strong>转变期</strong>的员工，轮转期的员工具有高度的流动性，基础器的员工已经十分稳定。处于转变期的员工刚好介于两者之间，他们对自己的能力有较为清晰的认识，同时具备一定的职业规划，能在自身能力和公司的需求上寻找平衡。</p>
<h2 id="同事联络网"><a href="#同事联络网" class="headerlink" title="同事联络网"></a>同事联络网</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-307130c82e4f9ea8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="同事联络网.png"></p>
<h2 id="建立联盟的的两种的做法"><a href="#建立联盟的的两种的做法" class="headerlink" title="建立联盟的的两种的做法"></a>建立联盟的的两种的做法</h2><ul>
<li>任期中的协调-协调员工和公司的目标和价值观</li>
<li>执行转变期计划-通过开诚布公的双向对话建立信任，打造合适的任期计划</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>终身雇佣时代已经过去，联盟的时代正在来临。通过雇主与雇员之间开诚布公的双向对话，互不信任的雇佣关系可以转变为互惠互利、互相投资的终身联盟；</li>
<li>打造任期制，将非终身雇佣的员工变为公的长期人脉，并且吸收员工的高效人脉情报</li>
<li>员工的人脉情报是新信息的来源，它会带来隐藏的数据、意外的发现和机会；公司应该鼓励员工正确运用人脉情报开展工作，并且将其带回公司；</li>
<li>投资公司同事联盟网络，公司可以建立与员工的终身联盟关系，双方的价值都可以大大提升，他可以提供人脉情报，推荐人才，甚至提高销售额。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/11/2016-06-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/11/2016-06-11/" itemprop="url">一个iOS程序员的面试心得</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-11T22:42:22+08:00">
                2016-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前言<br>前段时间经过一段长时间的纠结，终于决定离开公司另谋出路。我的上家公司是一家创业公司做教育o2o的，没有融资（也一直没有拉到融资），是一家传统的少儿教育艺术培训学校投资成立的一家互联网教育公司。大家都知道去年o2o非常火，但有一个弊端就是烧钱烧的厉害，而传统行业也想借着移动互联网这东风乘势发展壮大，他也有个弊端就是没有那些新兴的互联网公司那么有魄力，有思维，毕竟做传统行业做久了有其思维局限；后面因为资金的原因，产品出来了却一直推广不开来，尽管这个项目从最开始成立的时候我就来了，也算是元老级别的人物了，但是我一直看不到未来的发展！于是我就决定离开！另谋发展！</p>
<h1 id="言归正传，我的求职者之路"><a href="#言归正传，我的求职者之路" class="headerlink" title="言归正传，我的求职者之路"></a>言归正传，我的求职者之路</h1><ul>
<li>骑驴找马</li>
<li>招聘平台很重要（干货）</li>
<li>面试环节（干货）</li>
</ul>
<h2 id="骑驴找马"><a href="#骑驴找马" class="headerlink" title="骑驴找马"></a>骑驴找马</h2><p>说真的，我的求职我算是比较顺利的，因为我就面试了的第一家公司就直接给了offer，他是做少儿英语教育的。而我是利用上班时间去面试的，前言部分我也说过，公司产品<a href="https://itunes.apple.com/cn/app/yi-xue-yi-shu-jiao-yu-fu-wu/id1043472268?mt=8" target="_blank" rel="noopener">艺学</a>去年过年以前就基本完成了，过年回来也就改改小bug，新增小需求，学习swift、php、h5，事情比较少，自己比较闲，而且之前加班有调休没有用完，所以一旦有面试机会就可以请个半天假去面试，也就是大家熟称的<strong>骑驴找马</strong>。</p>
<p>在这里我不得不警告想换公司的程序员们不要辞职之后再找工作（当然你觉得你有这个能力，那也可以这么做），风险太大，我一个朋友的朋友从过年到现在4个月了都没有找到工作（在各大平台上投递简历300多份，共有面试机会20个左右，当然很大一部分原因是他整天玩游戏，根本就没有集中精力找工作，简历写的不咋样）；大家都知道去年是iOS开发的的顶峰时期，iOS移动开发人员需求量算是达到了顶峰，于是大批的毕业生和其他其行业的人员通过培训掌握iOS开发，导致供求关系的天平向公司这边倾斜，然后去年年末又是互联网寒冬，大批的互联网为公司倒闭，所以工作不好找；</p>
<h2 id="招聘平台很重要"><a href="#招聘平台很重要" class="headerlink" title="招聘平台很重要"></a>招聘平台很重要</h2><p>我推荐<strong>boss直聘</strong>，等待周期短，直接和对方hr、CTO或者CEO聊听对话，对方看你简历不错直接就有面试机会。</p>
<p><em>2017.08.30补充：前段时间爆出的李文星之死，面试者自己需要留个心眼，毕竟别为了急着找工作而不假思索的去面试，网上有好多防骗指南，我这里也分享一个<a href="https://pan.baidu.com/s/1o8ds7pS" target="_blank" rel="noopener">求职防骗指南</a> 提取密码: dbbq</em></p>
<p>找工作之初，我就开始关注各大招聘信息平台，手机里面也下载了相应app比如拉钩网，boss直聘，猎聘，脉脉，智联招聘，看到上面发布的的职位还是挺多的，薪资也还行，但貌似没有去年那么好，公司的职位要求也提高了许多；我花费整整一天的时间填写好自己的详细信息，并且写好了简历；开始了我的投递简历过程，刚开始我还是很谨慎的，只是在拉勾上面投了我中意的公司；以及在猎聘上和猎头联系，以及在脉脉上和一些大公司联系！</p>
<p>不管是和猎头沟通还是通过脉脉和这些BAT一样的一线的互联网公司的相关人员交流，看了我的简历都指出我的技术能力可以，但是就是教育背景不行；前两家公司都是在创业型的小公司工作，单挑项目，app不出名，比较小众，尽管能锻炼能力，但是说实在的这样的工作经历真心不好找下家，此刻我才明白，必须得去大公司镀镀金，我毕业的吉首大学，咋一听是不是以为和吉林大学有点关系，其实毛关系都没有，后者是985高校，前者只是湖南省一个很普通的2本；而且我想大多数人应该和我一样都不是名牌学校出来，这找工作就看出了差异，猎头看我不是985、211出来的，直接就说不给我推，后面我也就没在猎聘上投了；而且好多猎头是骗你简历。</p>
<p>而我在拉勾上投递的都是像新浪，小米，百度，京东这样的大公司，但是结果可想而知，等了将一两周的时间，人家好不容易看了我的简历，立马被标记为不合适；<br><img src="http://upload-images.jianshu.io/upload_images/1603505-efe85587994d4e97.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="resume.PNG"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-1105ba625d0e3995.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="sorry.PNG"></p>
<p>所以我建议大家别用拉勾网投，对方处理你的简历时间长，你耗不起，如果你要投，也得投回复率高的公司；<br>后面我果断换了boss直聘，你看中某个职位能够直接和对方聊听，对方看了你的微简历感觉还ok的话就会和你聊下去，否者基本上不会理你，所以在boss直聘上面的微简历一定要写好，写的详细点，自己的优势，充分展示自己，让hr能够给你面试机会；</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-d08779ee20ecd83c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="boss.png"></p>
<h2 id="面试环节"><a href="#面试环节" class="headerlink" title="面试环节"></a>面试环节</h2><ol>
<li>hr面试<br>无非就是问一些诸如，为什么离开现公司，期望工资多少，未来有什么发展之类的！这些你就根据个人如实回答就行</li>
<li>技术面试（做好充足准备）<br>现在iOS面试的也就那么些题目，所以就算你不会，那么背，你都要背下来；我推荐两个不错的链接，供大家学习；<br>（1）<a href="https://wangmeng.gitbooks.io/ios-note/content/interview_1.html" target="_blank" rel="noopener">iOS面试题</a>，这里面有基础篇，UI篇，原理篇很全面；<br>（2）<a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01《招聘一个靠谱的iOS》面试题参考答案/《招聘一个靠谱的iOS》面试题参考答案（上）.md" target="_blank" rel="noopener">招聘一个靠谱的 iOS</a>，这里面有许多涉及底层的知识，如runtime，runloop。但是想要真正理解，还是得自己敲代码才行。<br>我敢说，只要你把把这两个里面的问题都弄懂，一般iOS的技术面试你90%都没什么问题！</li>
<li>加分点<br>我认为这一点非常重要，程序员必须要有建立自己的技术博客，GitHub有自己的开源项目，AppStore有自己的app等等这些都能为你的面试加分。这很能在面试官面前体现你的专业性。</li>
</ol>
<p>最后，给大家分享Easy写的<a href="链接: https://pan.baidu.com/s/1jHHgfiA 密码: p4sg">程序员跳槽全攻略</a>，对我们程序员未来的发展分析的很透彻，通过这个你能知道自己未来是要走技术大牛路线、管理路线或是自己创业！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/19/2016-05-19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/19/2016-05-19/" itemprop="url">教你快速学会Git分布式版本控制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-19T19:42:49+08:00">
                2016-05-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为使用Github，OSChina管理自己项目的时候，使用git终端命令不是特熟悉，所以特地特地把公司之前买的<strong><a href="http://item.jd.com/11615420.html" target="_blank" rel="noopener">Git 版本控制管理(第二版)</a></strong>给看了一遍，再结合自己实际操作，对Git的使用和理解还是提升的不少；所以就写一篇博文来记录自己的学习Git之旅，有误之处欢迎大家指正。</p>
<ul>
<li>Git的简单介绍</li>
<li>Git和SVN的对比</li>
<li>Git使用的快速入门</li>
<li>Github、OSchina的使用</li>
</ul>
<p>对于前两部分的内容，大家可以初略看下，有个印象知道一些名词概念就好，重点还是得多练习、多操作，也就是第三部分内容需要实际操作；</p>
<h1 id="Git的简单介绍"><a href="#Git的简单介绍" class="headerlink" title="Git的简单介绍"></a>Git的简单介绍</h1><h2 id="Git是什么？"><a href="#Git是什么？" class="headerlink" title="Git是什么？"></a>Git是什么？</h2><p>Git是一款免费、开源的<strong>分布式版本控制系统</strong>；<br>是由Linux之父Linus开发，开发缘由自己可以上网查看下或者下载我在百度云盘分享的<a href="https://pan.baidu.com/s/1kVuLMkf" target="_blank" rel="noopener">Git权威指南</a>，Linus确实很牛逼，不得不佩服人家，花了一个月的时间就开发成功了！<br>与Git对应的<strong>集中式版本控制</strong>有CVS、SVN（集中式版本库控制的集大成者）。</p>
<h2 id="Git读音："><a href="#Git读音：" class="headerlink" title="Git读音："></a>Git读音：</h2><p>有必要先说一下Git的读音，音标：[gɪt]，字母G的发音与Gives、Gift的发音一样，所以发音听起来像是“歌易特”；我之前的读法和听到很多人的读法一直都是错误的：“计易特”；</p>
<h2 id="Git的工作原理"><a href="#Git的工作原理" class="headerlink" title="Git的工作原理"></a>Git的工作原理</h2><p>有必要介绍下几个名词：<br><strong>工作区（Working Directory）</strong>：仓库文件夹里除.git目录以外的目录；<br><strong>版本库（Repository）</strong>：位于工作区根目录下.git目录中，用于存储记录版本信息，.git是一个隐藏文件夹，在终端中输入这条命令<code>defaults write com.apple.finder AppleShowAllFiles -bool true</code>就可以显示隐藏文件（隐藏Mac隐藏文件的命令：<code>defaults write com.apple.finder AppleShowAllFiles -bool false</code>）；<br><strong>- 暂缓区（stage）</strong><br><strong>- 分支（master）</strong>：git自动创建的第一个分支<br><strong>- HEAD指针</strong>：用于指向当前分支</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1603505-c553e7231f94ea5e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="原理.png"></p>
<h2 id="Git的工作流程"><a href="#Git的工作流程" class="headerlink" title="Git的工作流程"></a>Git的工作流程</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-b891b59ea111aab8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="git工作流程.png"></p>
<h1 id="Git和SVN的对比"><a href="#Git和SVN的对比" class="headerlink" title="Git和SVN的对比"></a>Git和SVN的对比</h1><h2 id="集中式版本控制和分布式版本控制的对比"><a href="#集中式版本控制和分布式版本控制的对比" class="headerlink" title="集中式版本控制和分布式版本控制的对比"></a>集中式版本控制和分布式版本控制的对比</h2><p>从下面两个图可以看出这二者之间的区别：</p>
<ol>
<li><strong>分布式下开发者可以本地提交代码，集中式必须联网才能提交；</strong></li>
<li><strong>分布式下开发者的电脑就是一个完整的版本库，拥有本地的代码仓库。</strong><br><img src="http://upload-images.jianshu.io/upload_images/1603505-4f8e5ebf9df27230.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="集中式版本控制.png"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-1f44373955af2888.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="分布式版本控制.png"><h2 id="Git和SVN的对比-1"><a href="#Git和SVN的对比-1" class="headerlink" title="Git和SVN的对比"></a>Git和SVN的对比</h2>1、 速度：Git比SVN快；<br>2、结构：Git是分布式管理，SVN是集中式管理；<br>3、其他：Git支持本地版本控制工作，SVN必须联网才能；Git拥有更强大的分支管理；Git只会在根目录拥有一个.git，旧版本的svn会在的每个目录放一个.svn等等。</li>
</ol>
<h1 id="Git使用的快速入门"><a href="#Git使用的快速入门" class="headerlink" title="Git使用的快速入门"></a>Git使用的快速入门</h1><h2 id="使用git-init创建初始版本库；"><a href="#使用git-init创建初始版本库；" class="headerlink" title="使用git init创建初始版本库；"></a>使用<code>git init</code>创建初始版本库；</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-96605c6d1010373a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="gitinit.png"><br>打开GitDemo文件夹可以看到新增了个.git隐藏文件夹，所有的版本数据库数据都将存放在.git的隐藏子目录中；<br><img src="http://upload-images.jianshu.io/upload_images/1603505-882bd4fefad25e6d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="git文件.png"></p>
<h2 id="使用git-clone-remoteURL-从远程服务器克隆一份代码到本机；"><a href="#使用git-clone-remoteURL-从远程服务器克隆一份代码到本机；" class="headerlink" title="使用git clone [remoteURL]从远程服务器克隆一份代码到本机；"></a>使用<code>git clone [remoteURL]</code>从远程服务器克隆一份代码到本机；</h2><p>在公司中，经常是团队开发，先从服务器把项目给clone到自己电脑<br><img src="http://upload-images.jianshu.io/upload_images/1603505-5e02dfeb2de46a37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="C27D1E0B-539F-4417-9D5C-45B8822DDE48.png"></p>
<h2 id="使用git-add-xxx-将文件添加到暂缓区"><a href="#使用git-add-xxx-将文件添加到暂缓区" class="headerlink" title="使用git add [xxx]将文件添加到暂缓区"></a>使用<code>git add [xxx]</code>将文件添加到暂缓区</h2><p>我们都知道Mac 电脑的Xcode已经完美的集成了Git，如下图，当我在GitDemo中新建一个项目是勾选框将为灰色；<br><img src="http://upload-images.jianshu.io/upload_images/1603505-e0840c9ee8fa172c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="step2.png"><br>如图：此时项目的文件有个状态为A、M和“？”（刚开始可能全是“？”当重新打开后就变为下图的状态了）<br><img src="http://upload-images.jianshu.io/upload_images/1603505-78c6b3e92a8d82bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DC031738-AD7E-41A0-A56C-1CBB649710AE.png"><br>此时用在终端中输入命令<code>git status</code>查看你的文件在工作目录与缓存的状态<br><img src="http://upload-images.jianshu.io/upload_images/1603505-5dc39968de4856b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3C4B6864-7F8A-4B2D-A622-603C5E71C91D.png"><br>上图显示的红色字体表示：新添加的文件或者修改的文件在工作区没有添加到暂缓区如果此时用<code>git add .</code>命令将会把工作区的所有文件添加到暂缓区中；</p>
<h2 id="使用git-commit-把暂缓区的所有内容提交到当前分支（master分支）"><a href="#使用git-commit-把暂缓区的所有内容提交到当前分支（master分支）" class="headerlink" title="使用git commit 把暂缓区的所有内容提交到当前分支（master分支）"></a>使用<code>git commit</code> 把暂缓区的所有内容提交到当前分支（master分支）</h2><p>使用终端输入<code>git status</code>查看，都变为绿色了，这就表示工作区的代码已经添加到暂缓区中，可以提交到本地代码仓库了<br><img src="http://upload-images.jianshu.io/upload_images/1603505-7d0129dea2d01fd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="81AD2BAB-1E28-4F56-BD06-383A4FA00172.png"><br>终端输入命令<code>git commit -m&quot;初始化版本仓库&quot;</code>，Xcode项目的各个文件右边的A和M都消失了，说明纳入版本控制成功</p>
<h2 id="添加-gitignore文件-git-同一级目录下"><a href="#添加-gitignore文件-git-同一级目录下" class="headerlink" title="添加.gitignore文件(.git 同一级目录下)"></a>添加.gitignore文件(.git 同一级目录下)</h2><p>我之前分享的<a href="http://www.jianshu.com/p/5fdb2116aa90" target="_blank" rel="noopener">使用oschina托管自己项目</a>第三大点有说过在GitHub下载gitignore文件，因为我的项目是Objective-C语言编写的所以我要添加的是Objective-C.gitignore，在终端中如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp /Users/xcq/Downloads/gitignore-master/Objective-C.gitignore .gitignore</span><br><span class="line">git add .gitignore </span><br><span class="line">git commit -m&quot;添加gitignore文件&quot;</span><br></pre></td></tr></table></figure></p>
<p>可以看到当前目录多了一个.gitignore<br><img src="http://upload-images.jianshu.io/upload_images/1603505-25e4a6213596dec6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1C23FE7C-01C2-48A2-8D44-09A46E988DA2.png"><br>添加.gitignore文件步骤很重要、很重要、很重要，重要的事情说三遍；<strong>添加.gitignore文件的步骤操作最好在git init步骤之后，也就是创建初始版本库之后就在工做根目录（也就是与.git同一层及目录）下添加.gitignore文件，然后再用Xcode新建一个项目</strong>，这样做才会真正的把所有不需要纳入版本控制的文件忽略；我之前的操作正好相反，是先新建了一个CQActionView的项目，然后才添加的.gitignore文件，这样做的后果是UserInterfaceState.xcuserstate并没有忽略，每一次command + 编译都会产生<br><img src="http://upload-images.jianshu.io/upload_images/1603505-09b49c8de88cc121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1AE9BD1C-6585-4FF5-AB21-4214CD23C4EC.png"><br>用Xcode自带Git的Commit也能看到，项目没有做任何修改，但是一编译就会有一些用户缓存数据<br><img src="http://upload-images.jianshu.io/upload_images/1603505-5b2b264a1ba68af3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="09b49c8de88cc121.png">还有种情况是我们已经写好的项目需要用Git管理，然后才添加的.gitignore文件，这也会出现上述问题<br>其中 <code>CQActionView/CQActionView.xcodeproj/project.xcworkspace/xcuserdata/xcq.xcuserdatad/UserInterfaceState.xcuserstate</code> 是上面第二张图红色的那个路径，直接copy过来就行；<code>git rm --cached [xxx]</code>会将文件从缓存区删除，但是工作目录中还存有该文件，解决方案如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached CQActionView/CQActionView.xcodeproj/project.xcworkspace/xcuserdata/xcq.xcuserdatad/UserInterfaceState.xcuserstate </span><br><span class="line">git commit -m&quot;Removed file that shouldn&apos;t be tracked&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="使用git-branch-xxx-创建分支，git-branch查看在本地的分支，git-branch-va可以查看本地-远程分支列表"><a href="#使用git-branch-xxx-创建分支，git-branch查看在本地的分支，git-branch-va可以查看本地-远程分支列表" class="headerlink" title="使用git branch [xxx]创建分支，git branch查看在本地的分支，git branch -va可以查看本地+远程分支列表"></a>使用<code>git branch [xxx]</code>创建分支，<code>git branch</code>查看在本地的分支，<code>git branch -va</code>可以查看本地+远程分支列表</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-fd7c8b4f8261829e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FB743F3E-EBAD-4D6B-BE53-96EB6F16C683.png"><br>如图，我们新建了一个“branch1”分支。如果你在master分支做了变更并且更新提交， 然后切换到了“ branch1”分支，Git 将还原你的工作目录到你创建分支时候的样子；</p>
<h2 id="工作实例：如下图，公司的远程仓库有有两个分支：master和feature-react-native。"><a href="#工作实例：如下图，公司的远程仓库有有两个分支：master和feature-react-native。" class="headerlink" title="工作实例：如下图，公司的远程仓库有有两个分支：master和feature_react_native。"></a>工作实例：如下图，公司的远程仓库有有两个分支：master和feature_react_native。</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-aa598e7e614d128f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="branch.png"><br>老大要求我在feature_react_native分支上进行功能开发，但是我clone到本地的代码对应的是远程的master分支，此时我就需要修改这种映射关系。如下图，通过<code>git branch -vv</code>查看本地分支和远程分支的跟踪关联关系：为本地的master和react_native分支都是对应远程的origin/master分支，这是导致的结果是，你完成修改代码然后push到的是远程的master分支，这是不符合要求的，<br><img src="http://upload-images.jianshu.io/upload_images/1603505-7c6d14b42cef4e97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="branch2.png"><br>通过<code>git branch --set-upstream react_native origin/feature_react_native</code>让本地分支react_native与远程分支origin/feature_react_native关联，这样你以后提交的代码就不会提交到远程master分支了<br><img src="http://upload-images.jianshu.io/upload_images/1603505-47529ee1d11dda87.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="branch3.png"></p>
<h2 id="使用git-checkout-xxx-切换分支，Git-会用该分支的最后提交的快照替换你的工作目录的内容，-所以多个分支不需要多个目录"><a href="#使用git-checkout-xxx-切换分支，Git-会用该分支的最后提交的快照替换你的工作目录的内容，-所以多个分支不需要多个目录" class="headerlink" title="使用git checkout [xxx]切换分支，Git 会用该分支的最后提交的快照替换你的工作目录的内容， 所以多个分支不需要多个目录"></a>使用<code>git checkout [xxx]</code>切换分支，Git 会用该分支的最后提交的快照替换你的工作目录的内容， 所以多个分支不需要多个目录</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-f730cc7e4593512b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="EB7E27E4-04A7-44D2-9FFF-A8D5377690AE.png"><br>如图，我在master分支，修改了ViewController.m文件并且提交，当我们切换到“branch1”分支的时候，ViewController.m又重新回到修改前的模样</p>
<h2 id="使用git-checkout-b-branchname-创建新的分支，并立即切换到它，也就是6和7步可以合并到这一步；git-checkout-b-develop-master基于主分支创建develop分支；"><a href="#使用git-checkout-b-branchname-创建新的分支，并立即切换到它，也就是6和7步可以合并到这一步；git-checkout-b-develop-master基于主分支创建develop分支；" class="headerlink" title="使用git checkout -b [branchname] 创建新的分支，并立即切换到它，也就是6和7步可以合并到这一步；git checkout  -b  develop master基于主分支创建develop分支；"></a>使用<code>git checkout -b [branchname]</code> 创建新的分支，并立即切换到它，也就是6和7步可以合并到这一步；<code>git checkout  -b  develop master</code>基于主分支创建develop分支；</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-83d2525f694cf33d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B9049A64-0179-47F6-975C-F3F34E0719C1.png"><br>与此同时你打开Xcode的Sourse Control也可以看到有三个分支：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-5ff92668d2c94294.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="sourse Control.png"><br><img src="http://upload-images.jianshu.io/upload_images/1603505-b99a4744fcb53337.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="sourse Control2.png"></p>
<h2 id="git-branch-d-branchname-删除本地分支，git-push-origin-delete-branchname-删除远程分支"><a href="#git-branch-d-branchname-删除本地分支，git-push-origin-delete-branchname-删除远程分支" class="headerlink" title="git branch -d [branchname]删除本地分支，git push origin --delete [branchname]删除远程分支"></a><code>git branch -d [branchname]</code>删除本地分支，<code>git push origin --delete [branchname]</code>删除远程分支</h2><p><img src="http://upload-images.jianshu.io/upload_images/1603505-b629bac50f970b52.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="F820C15A-32EF-42C3-841D-85E28E1AFB42.png"></p>
<ol>
<li>使用<code>git merge [branchname]</code>来合并分支<br>我在“ branch1”分支中编写了一段代码，完成了一段功能，并且想合并到master分支中，此时我需要先切换到master分支中，然后执行<code>git merge branch1</code><h2 id="新建的本地仓库与远程仓库进行关联，在本地仓库-git文件目录下执行git-remote-add-origin-remoteURL-，origin是远程仓库的名字。然后本地仓库的内容推送到远程仓库git-push-u-origin-master；如果失败则执行git-pull-origin-master-allow-unrelated-histories-，如果提示失败信息：fatal-refusing-to-merge-unrelated-histories，则上面中括号的参数需要添加。"><a href="#新建的本地仓库与远程仓库进行关联，在本地仓库-git文件目录下执行git-remote-add-origin-remoteURL-，origin是远程仓库的名字。然后本地仓库的内容推送到远程仓库git-push-u-origin-master；如果失败则执行git-pull-origin-master-allow-unrelated-histories-，如果提示失败信息：fatal-refusing-to-merge-unrelated-histories，则上面中括号的参数需要添加。" class="headerlink" title="新建的本地仓库与远程仓库进行关联，在本地仓库.git文件目录下执行git remote add origin [remoteURL]，origin是远程仓库的名字。然后本地仓库的内容推送到远程仓库git push -u origin master；如果失败则执行git pull origin master [--allow-unrelated-histories]，如果提示失败信息：fatal: refusing to merge unrelated histories，则上面中括号的参数需要添加。"></a>新建的本地仓库与远程仓库进行关联，在本地仓库.git文件目录下执行<code>git remote add origin [remoteURL]</code>，<code>origin</code>是远程仓库的名字。然后本地仓库的内容推送到远程仓库<code>git push -u origin master</code>；如果失败则执行<code>git pull origin master [--allow-unrelated-histories]</code>，如果提示失败信息：<code>fatal: refusing to merge unrelated histories</code>，则上面中括号的参数需要添加。</h2></li>
</ol>
<h2 id="以下是一些其他Git命令，我就没做例子，大家可以操作练习"><a href="#以下是一些其他Git命令，我就没做例子，大家可以操作练习" class="headerlink" title="以下是一些其他Git命令，我就没做例子，大家可以操作练习"></a>以下是一些其他Git命令，我就没做例子，大家可以操作练习</h2><ol>
<li><p>给git起个别名<br>git config alias.[别名] “status”</p>
</li>
<li><p>查看历史版本<br>git log<br>50163165822d3141742f4d4aece0e5c222ef156e<br>git reflog  // 查看分支引用记录<br>git 版本号是有SHA1机密算法生成的一个40位的哈希值</p>
</li>
<li><p>版本回退</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 回到当前版本，放弃所有没有提交的修改</span><br><span class="line">git reset --hard HEAD</span><br><span class="line"># 回到上一个版本</span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"># 回到之前第10个修订版本</span><br><span class="line">git reset --hard HEAD~10</span><br><span class="line"># 回到指定版本号的版本</span><br><span class="line">$ git reset --hard [版本号前七位]</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加标签（又叫添加里程碑）<br><code>git tag -a v1.0 -m &#39;version 1.0&#39;</code>，其中v1.0代表tagname，version 1.0代表标签的说明信息；<br><code>git push origin v1.3:v1.3</code>，将标签推送到远程仓库，v1.3:v1.3代表将本地v1.3推送到远程仓库的v1.3；<br><code>git tag</code>查看本地的标签；<br><code>git tag -d 1.0</code>删除本地的标签，1.0代表标签的版本；<br><code>git push origin :v1.2</code>删除远程的标签，这种情况发生在推送到远程的标签版本有错误，为了防止其他人获取到错误的标签，应该尽快的删除标签。</p>
</li>
</ol>
<p><strong>掌握以上的git内容，就能胜任平时90%开发的任务。</strong>最后，<strong>关于Git 分支的练习，我这有个好的练习网址：<a href="http://learngitbranching.js.org/?demo" target="_blank" rel="noopener">Learn Git Branching</a></strong> ，也是一个同事分享给我的，他的Git命令使用的溜溜的；很不错的一个练习Git分支操作的网址，大家点击进去之后可能什么内容都没有，不要急，稍等片刻就会出来。<br><img src="http://upload-images.jianshu.io/upload_images/1603505-23ed3f6d4d2d5943.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="git branching.png"></p>
<h1 id="Github、OSchina的使用"><a href="#Github、OSchina的使用" class="headerlink" title="Github、OSchina的使用"></a>Github、OSchina的使用</h1><p>从Github上clone代码，push，pull的操作大家可以下载GitHub Desktop 图形化界面进行操作，<br>OSchina就可以使用Xcode集成的Git，大家可以添加远程仓库地址，在Preferences(common + ,)–》Account –&gt;左下角有个加号–》Add Repository；然后就可以提交到远程中了。</p>
<p>终于写完了，不容易啊，太困了，最后的内容写的有点粗糙啊，见谅。。。😂😂😂</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/08/2016-05-08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/08/2016-05-08/" itemprop="url">iOS集成百度地图实现在线建议地址查询</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-08T19:09:07+08:00">
                2016-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天和大家分享：集成百度地图iOS SDK，实现在线建议查询地址。这是我的<a href="https://github.com/XcqRomance/SelectAddress.git" target="_blank" rel="noopener">github源码</a>，使用oc纯代码编写，部署版本是iOS8，大家可以下载运行代码；</p>
<h2 id="配置开发环境"><a href="#配置开发环境" class="headerlink" title="配置开发环境"></a>配置开发环境</h2><p>进入<a href="http://lbsyun.baidu.com/index.php?title=iossdk" target="_blank" rel="noopener">百度地图开发者中心</a>根据步骤即可实现。我是使用CocoaPods导入地图SDK（没有安装CocoaPods，可以根据这篇文章使用<a href="http://code4app.com/article/cocoapods-install-usage" target="_blank" rel="noopener">CocoaPods安装和使用教程</a>），而且我也极力推荐大家使用CocoaPods来管理第三方库；<br>我主要讲一下注意点：<br><strong>注意一：</strong>务必在info.plist如下配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;</span><br><span class="line">    &lt;true/&gt;</span><br><span class="line">&lt;/dict&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意二：</strong>按需引入SDK中的头文件，不要把所有的头文件包含进来，这样会导致编译时间延长，如下实现在线建议查询地址我这项目中只需要引入连个头文件即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;BaiduMapAPI_Search/BMKSearchComponent.h&gt; //引入检索功能所有的头文件</span><br><span class="line">#import &lt;BaiduMapAPI_Location/BMKLocationComponent.h&gt;//引入定位功能所有的头文件</span><br></pre></td></tr></table></figure></p>
<p><strong>注意三：</strong>info.plist文件记得添加另外两个key-value，</p>
<ol>
<li><p>打开定位服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">需要在info.plist文件中添加(以下二选一，两个都添加默认使用NSLocationWhenInUseUsageDescription)；</span><br><span class="line">NSLocationWhenInUseUsageDescription 允许在前台使用时获取GPS的描述；</span><br><span class="line">NSLocationAlwaysUsageDescription 允许永远可获取GPS的描述。</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加Bundle display name<br><img src="http://upload-images.jianshu.io/upload_images/1603505-a1504f125d69655e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="care.png"></p>
</li>
</ol>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>先简要介绍下项目的各个类，如下图<br><img src="http://upload-images.jianshu.io/upload_images/1603505-283a341a25108e56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="introduction.png"></p>
<p>主要介绍下<code>LocationManager</code>类是对开始定位和停止定位封装好的单例，主要有三个方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  开始定位</span><br><span class="line"> */</span><br><span class="line">- (void)startLocation;</span><br><span class="line">/**</span><br><span class="line"> *  停止定位</span><br><span class="line"> */</span><br><span class="line">- (void)stopLocation;</span><br><span class="line">/**</span><br><span class="line"> *  判断是否授权开启定位</span><br><span class="line"> */</span><br><span class="line">- (BOOL)isAuthorizeOpenLocation;</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>在AppDelegate.m文件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">    </span><br><span class="line">    // 要使用百度地图，请先启动BaiduMapManager </span><br><span class="line">    _mapManager = [[BMKMapManager alloc]init];</span><br><span class="line">    BOOL ret = [_mapManager start:BMAppKey generalDelegate:self];</span><br><span class="line">    if (!ret) &#123;</span><br><span class="line">        NSLog(@&quot;manager start failed!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 程序一启动开始定位</span><br><span class="line">    [[LocationManager shareLocationManager] startLocation]; </span><br><span class="line"></span><br><span class="line">    // 1.初始化窗口</span><br><span class="line">    self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];</span><br><span class="line">    // 2.设置窗口根控制器</span><br><span class="line">    self.window.rootViewController = [[UINavigationController alloc] initWithRootViewController:[[SelectAddressTableViewController alloc] init]];</span><br><span class="line">    // 3.显示窗口</span><br><span class="line">    [self.window makeKeyAndVisible];</span><br><span class="line">    </span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>LocationManager中的startLocation方法中获取位置信息<br>//初始化BMKLocationService</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> - (instancetype)init &#123;</span><br><span class="line">    if (self = [super init]) &#123;</span><br><span class="line">        //初始化BMKLocationService</span><br><span class="line">        _locService = [[BMKLocationService alloc]init];</span><br><span class="line">        _locService.delegate = self;</span><br><span class="line">        // 设定定位的最小更新距离(米)，更新频率。默认为kCLDistanceFilterNone</span><br><span class="line">        _locService.distanceFilter = 100.0f;</span><br><span class="line">        // 设定定位精度。默认为kCLLocationAccuracyBest。</span><br><span class="line">        _locService.desiredAccuracy = kCLLocationAccuracyNearestTenMeters; // 定位精度10m</span><br><span class="line">        </span><br><span class="line">        _geoSearcher = [[BMKGeoCodeSearch alloc] init];</span><br><span class="line">        _geoSearcher.delegate = self;</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)startLocation &#123;</span><br><span class="line">    if ([self isAuthorizeOpenLocation]) &#123; // 已经授权定位</span><br><span class="line">        //启动LocationService</span><br><span class="line">        [_locService startUserLocationService];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@&quot;定位服务未开启&quot; message:@&quot;请在设置中开启定位服务&quot; delegate:self cancelButtonTitle:@&quot;取消&quot; otherButtonTitles:@&quot;去设置&quot;, nil];</span><br><span class="line">        [alert show];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 判断是否授权开启定位</span><br><span class="line">- (BOOL)isAuthorizeOpenLocation &#123;</span><br><span class="line">    if ([CLLocationManager locationServicesEnabled] &amp;&amp;</span><br><span class="line">        ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorizedAlways</span><br><span class="line">         || [CLLocationManager authorizationStatus] == kCLAuthorizationStatusNotDetermined || [CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorizedWhenInUse)) &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    return NO; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在回调方法中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//处理位置坐标更新</span><br><span class="line">- (void)didUpdateBMKUserLocation:(BMKUserLocation *)userLocation</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3、发起反向地理编码检索<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//处理位置坐标更新</span><br><span class="line">- (void)didUpdateBMKUserLocation:(BMKUserLocation *)userLocation</span><br><span class="line">&#123;</span><br><span class="line">//    NSLog(@&quot;didUpdateUserLocation lat %f,long %f&quot;,userLocation.location.coordinate.latitude,userLocation.location.coordinate.longitude);</span><br><span class="line">    </span><br><span class="line">    //发起反向地理编码检索</span><br><span class="line">    _geoSearcher = [[BMKGeoCodeSearch alloc] init];</span><br><span class="line">    _geoSearcher.delegate = self;</span><br><span class="line">    </span><br><span class="line">    CLLocationCoordinate2D pt = (CLLocationCoordinate2D)&#123;userLocation.location.coordinate.latitude, userLocation.location.coordinate.longitude&#125;;</span><br><span class="line">    BMKReverseGeoCodeOption *reverseGeoCodeSearchOption = [[</span><br><span class="line">    BMKReverseGeoCodeOption alloc] init];</span><br><span class="line">    reverseGeoCodeSearchOption.reverseGeoPoint = pt;</span><br><span class="line">    BOOL flag = [_geoSearcher reverseGeoCode:reverseGeoCodeSearchOption];</span><br><span class="line"></span><br><span class="line">    if(flag)</span><br><span class="line">    &#123;</span><br><span class="line">      NSLog(@&quot;反geo检索发送成功&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">      NSLog(@&quot;反geo检索发送失败&quot;); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接收反向地理编码的回调</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//  接收反向地理编码结果</span><br><span class="line">-(void) onGetReverseGeoCodeResult:(BMKGeoCodeSearch *)searcher result:</span><br><span class="line">(BMKReverseGeoCodeResult *)result</span><br><span class="line">                        errorCode:(BMKSearchErrorCode)error&#123;</span><br><span class="line">    if (error == BMK_SEARCH_NO_ERROR) &#123;</span><br><span class="line">        //      在此处理正常结果</span><br><span class="line">        NSLog(@&quot;%@--%@&quot;,result.addressDetail.city, result.address);</span><br><span class="line">        </span><br><span class="line">        if ([[[NSUserDefaults standardUserDefaults] valueForKey:@&quot;UserCurrentAddress&quot;] isEqualToString:result.address]) &#123; // 用户当前位置与沙河存储位置相同</span><br><span class="line">            // 关闭定位服务LocationService</span><br><span class="line">            [self stopLocation];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            [[NSUserDefaults standardUserDefaults] setValue:result.addressDetail.city forKey:@&quot;UserCurrentCity&quot;];  // 将用户城市位置存储，以便后面进行设置地址时的city</span><br><span class="line">            [[NSUserDefaults standardUserDefaults] setValue:result.address forKey:@&quot;UserCurrentAddress&quot;];</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        [self startLocation];</span><br><span class="line">        NSLog(@&quot;抱歉，未找到结果&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体代码实现可以<a href="https://github.com/XcqRomance/SelectAddress.git" target="_blank" rel="noopener">github源码</a>上面下载</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/03/2016-05-03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Romance">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/romance.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Romance的修行之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/03/2016-05-03/" itemprop="url">Mac系统U盘启动盘的制作及Mac系统的安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-03T13:50:26+08:00">
                2016-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>人生就像卫生纸，尽量少扯；时间就像卫生纸，看着挺多，用着用着就没了</p>
</blockquote>
<p>本文将分享如何制作OS X EI 10.11系统的 u盘启动盘（只能使用mac电脑制作）以及Mac系统的安装步骤。 </p>
<p>本文包含以下内容：</p>
<ul>
<li><a href="#1">U盘启动盘的制作</a></li>
<li><a href="#2">Mac系统的安装步骤</a></li>
</ul>
<h1 id="U盘启动盘的制作"><a href="#U盘启动盘的制作" class="headerlink" title="U盘启动盘的制作"></a><span id="1">U盘启动盘的制作</span></h1><h2 id="先下载“-OS-X-EL”安装程序"><a href="#先下载“-OS-X-EL”安装程序" class="headerlink" title="先下载“ OS X EL”安装程序"></a>先下载“ OS X EL”安装程序</h2><p>打开appstore，点击精选，在右上角搜索栏内输入“Capitan”，搜索到10.11.4，OS X ELCapitan最新系统，点击下载或获取安装进行下载。下载完成，弹出提示是否需要更新，请勿点击更新。关闭App Store，并且打开finder，确认“ OS X EL”安装程序是否在“应用程序”中，下图是下载好的最新系统；<br><img src="http://upload-images.jianshu.io/upload_images/1603505-06ab57a328d8e2e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="step1.png"></p>
<h2 id="U盘格式化Mac-OS-扩展日志式"><a href="#U盘格式化Mac-OS-扩展日志式" class="headerlink" title="U盘格式化Mac OS 扩展日志式"></a>U盘格式化Mac OS 扩展日志式</h2><p>准备一个8GB的U盘，然后打开应用程序-实用工具-磁盘工具，左侧-选择U盘，然后点击右边“抹掉”选项，格式选择Mac OS 扩展日志式，磁盘名称一定要写MyVolume，然后点击抹掉。如下图所示：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-96897318f07dbf43.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="step2.png"></p>
<h2 id="使用终端命令制作安装盘"><a href="#使用终端命令制作安装盘" class="headerlink" title="使用终端命令制作安装盘"></a>使用终端命令制作安装盘</h2><p>抹掉U盘以后，打开应用程序-实用工具-终端：在终端中输入以下命令，直接复制粘贴即可，完成后，会提示输入管用员密码，然后直接输入管理员密码，按回车（输入时，电脑上不会有显示，直接输入，输入完回车即可，如果管理员未设置密码，请在系统偏好设置-帐户-更改密码中设置一个密码，这很重要，一定要设置一个有密码的帐户）<br>回车后，会再出现一行提示，输入Y，然后回车，此时，就会开始制作安装盘，大概在20-30分钟左右完成。中间请不要让电脑待机。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/Install\ OS\ X\ El\ Capitan.app/Contents/Resources/createinstallmedia --volume /Volumes/MyVolume --applicationpath /Applications/Install\ OS\ X\ El\ Capitan.app</span><br></pre></td></tr></table></figure></p>
<p>制作中：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-b334e2a79b661d09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="step3.png"><br>制作完成：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-8e9e85ad70d5a1c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="finnish.png"><br>完成以上三步之后，U盘系统盘就制作完毕，打开U盘，将会看到有安装的系统；如下：<br><img src="http://upload-images.jianshu.io/upload_images/1603505-f674c70282c61f72.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="U盘.png"></p>
<h1 id="Mac系统的安装"><a href="#Mac系统的安装" class="headerlink" title="Mac系统的安装"></a><span id="2">Mac系统的安装</span></h1><p><strong>操作这一步之前，请您先备份一下当前电脑里的重要资料</strong></p>
<ol>
<li>重启电脑，马上按住Command (⌘) ＋option＋R键。如果未接入互联网，请从地球仪图标的下方选取一个WIFI网络并连接。（此步骤通常需要20-30分钟的下载时间，此时间可能会根据网速有所不同）</li>
<li>下载完成后会进入“OS X实用工具”选择“磁盘工具”，然后点按“继续”。</li>
<li>在左侧选择您的硬盘（通常是磁盘工具对话框左侧首位顶格的磁盘），然后点按右侧“抹掉”标签。</li>
<li>从“格式化”菜单中选取“Mac OS 扩展（日志式）”，输入名称来命名磁盘，然后点按右下角“抹掉”。</li>
<li>磁盘完成抹掉后，请选取位于整个屏幕的左上角菜单“磁盘工具”&gt;“退出磁盘工具”，并重启电脑。</li>
<li>重启电脑时，按住option键，选择U盘引导安装盘安装OS X系统，按提示操作，等待完成系统安装。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/romance.jpg"
                alt="Romance" />
            
              <p class="site-author-name" itemprop="name">Romance</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/XcqRomance" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.jianshu.com/u/d1414d91084a" target="_blank" title="简书">
                      
                        <i class="fa fa-fw fa-globe"></i>简书</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Romance</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
